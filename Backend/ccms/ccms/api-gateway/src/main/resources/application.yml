# src/main/resources/application.yml
server:
  port: 8080 # 网关端口（前端统一访问此端口）

spring:
  application:
    name: api-gateway
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848 # Nacos地址
    gateway:
      discovery:
        locator:
          enabled: true # 启用服务发现路由（通过服务名转发）
      routes:
        # 认证服务路由（/api/auth/** 路径转发到auth-service）
        - id: auth-service-route
          uri: lb://auth-service # lb表示负载均衡，指向Nacos中的auth-service
          predicates:
            - Path=/api/auth/** # 匹配路径
          filters:
            - StripPrefix=0 # 去掉路径中的第一个前缀（/api）

        # 社团服务路由（后续添加）
        - id: club-service-route
          uri: lb://club-service
          predicates:
            - Path=/api/club/**
          filters:
            - StripPrefix=0
            - name: AuthFilter # 自定义过滤器（验证JWT）

  redis:
    host: localhost
    port: 6379

# JWT配置（与auth-service保持一致）
jwt:
  secret: "x8#kP2!zQ7$wR9*vT3&sY5^dF1@gH4%" # 自定义密钥，确保两端一致
  expire: 86400000 # 24小时（毫秒）