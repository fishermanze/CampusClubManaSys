server:
  port: 8081 # 认证服务端口

spring:
  application:
    name: auth-service # 服务名称（注册到Nacos的名称）
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848 # Nacos地址
        weight: 100 # 服务权重（0-100，用于负载均衡）
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/club_auth?useUnicode=true&characterEncoding=utf8&serverTimezone=GMT%2B8&allowPublicKeyRetrieval=true
    username: root # MySQL用户名
    password: 320621 # MySQL密码
    hikari:
      maximum-pool-size: 10 # 最大连接数
      minimum-idle: 5 # 最小空闲连接
      idle-timeout: 300000 # 空闲超时时间（5分钟）
      connection-timeout: 20000 # 连接超时时间（20秒）
      connection-test-query: SELECT 1 # 连接有效性测试查询
  redis:
    host: localhost # Redis主机地址
    port: 6379 # Redis端口
    password: # Redis密码（无密码则留空）
    database: 0 # 操作的Redis数据库索引
    lettuce:
      pool:
        max-active: 8 # 连接池最大活跃连接数
        max-idle: 8 # 连接池最大空闲连接数
        min-idle: 2 # 连接池最小空闲连接数
        max-wait: 10000ms # 连接池最大等待时间
    # Redis序列化配置（解决对象存储乱码问题）
    template:
      key-serializer: org.springframework.data.redis.serializer.StringRedisSerializer
      value-serializer: org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer
  # 新增：禁用Spring Security默认用户（解决启动报错）
  security:
    user:
      name:
      password:

# MyBatis-Plus配置
mybatis-plus:
  mapper-locations: classpath:mapper/*.xml # 递归扫描mapper目录及子目录下的XML文件
  type-aliases-package: com.club.common.entity # 实体类别名包（简化XML中resultType写法）
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl # 开发环境打印SQL日志（便于调试）
    map-underscore-to-camel-case: true # 开启下划线转驼峰命名映射（适配数据库字段与实体属性）
  global-config:
    db-config:
      id-type: auto # 主键自增策略（根据数据库表结构调整，如雪花算法可改为ID_WORKER）
      logic-delete-field: isDeleted # 逻辑删除字段名（若启用逻辑删除则配置）
      logic-delete-value: 1 # 逻辑删除标识值
      logic-not-delete-value: 0 # 逻辑未删除标识值

# JWT配置
jwt:
  secret: "x8#kP2!zQ7$wR9*vT3&sY5^dF1@gH4%2B6" # JWT签名密钥（生产环境建议改为32位以上随机字符串）
  expire: 86400000 # 访问令牌过期时间（24小时，单位：毫秒）
  issuer: club-system-auth-service # JWT签发者标识
  refresh-expire: 604800000 # 刷新令牌过期时间（7天，单位：毫秒）

# 日志配置（可选，细化日志输出）
logging:
  level:
    root: INFO # 根日志级别
    com.club.auth.mapper: DEBUG # Mapper接口日志级别（打印SQL参数）
    com.club.auth.service: INFO # Service层日志级别
    org.springframework.security: INFO # Spring Security日志级别